<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The Origin Chronicles</title>
    <style>
        :root {
            --glow: #e0a3ff;
            --bg: #0d0b14;
            --panel: #1a1625;
        }

        body { 
            font-family: 'Garamond', serif; 
            background: var(--bg); 
            color: #f0e6d2; 
            padding: 40px;
            background-image: radial-gradient(circle at center, #1b1429 0%, #0d0b14 100%);
        }

        h1 { 
            text-align: center; 
            font-size: 3.5rem; 
            text-shadow: 0 0 20px var(--glow); 
            letter-spacing: 5px;
            color: #fff;
            margin-bottom: 50px;
        }

        .origin-section { 
            margin-bottom: 60px; 
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            border: 1px solid rgba(224, 163, 255, 0.2);
        }

        h2 { 
            text-transform: uppercase; 
            color: #ffcc00; 
            border-bottom: 2px solid #ffcc00;
            display: inline-block;
            padding-bottom: 5px;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px #000;
        }

        .gallery { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); 
            gap: 25px; 
        }

        .card { 
            background: var(--panel); 
            padding: 20px; 
            border-radius: 10px; 
            text-align: center; 
            border: 1px solid #332b45;
            transition: all 0.3s ease;
            min-height: 220px;
        }

        .card:hover { 
            transform: translateY(-10px); 
            box-shadow: 0 0 25px rgba(224, 163, 255, 0.4);
            border-color: var(--glow);
        }

        .card img { 
            width: 100px; 
            height: auto; 
            max-height: 120px;
            image-rendering: pixelated; 
            filter: drop-shadow(0 0 8px rgba(0,0,0,0.8));
            margin-bottom: 15px; 
        }

        .card h3 { 
            margin: 10px 0 5px 0; 
            font-size: 1.3rem; 
            color: #fff;
        }

        .card p { 
            color: #a099b3; 
            font-size: 0.9rem; 
            font-style: italic;
        }
    </style>
</head>
<body>

    <h1>The Origin Chronicles</h1>

    <div id="container">Gathering the legends...</div>

    <script>
        async function loadGallery() {
            const container = document.getElementById('container');

            try {
                const response = await fetch('all_players_master.json');
                const master = await response.json();
                container.innerHTML = '';

                const origins = {};
                Object.values(master).forEach(p => {
                    if (!origins[p.origin]) origins[p.origin] = [];
                    origins[p.origin].push(p);
                });

                for (const [origin, players] of Object.entries(origins)) {
                    const section = document.createElement('div');
                    section.className = 'origin-section';
                    section.innerHTML = `<h2>✧ ${origin} ✧</h2><div class="gallery" id="gal-${origin}"></div>`;
                    container.appendChild(section);

                    const gal = document.getElementById(`gal-${origin}`);
                    players.forEach(p => {
                        const uuid = p.uuid;
                        // Tier 1: 3D Cube
                        const cubeUrl = `https://minotar.net/cube/${uuid}/100.png`;
                        // Tier 2: Body Fallback
                        const bodyUrl = `https://minotar.net/body/${uuid}/100.png`;
                        // Tier 3: Steve Head Fallback
                        const steveUrl = `https://minotar.net/cube/char/100.png`;

                        gal.innerHTML += `
                            <div class="card">
                                <img src="${cubeUrl}" 
                                     alt="${p.name}"
                                     onerror="if(this.src != '${bodyUrl}'){ this.src='${bodyUrl}'; } else { this.src='${steveUrl}'; }">
                                <h3>${p.name}</h3>
                                <p>${p.class}</p>
                            </div>
                        `;
                    });
                }
            } catch (err) {
                container.innerHTML = "❌ Failed to load players: " + err.message;
            }
        }
        loadGallery();
    </script>
</body>
</html>

